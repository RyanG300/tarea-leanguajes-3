<?xml version="1.0" encoding="UTF-8"?><sqlb_project><db path="menu_inteligente_base.db" readonly="0" foreign_keys="1" case_sensitive_like="0" temp_store="0" wal_autocheckpoint="1000" synchronous="2"/><attached/><window><main_tabs open="structure browser pragmas query" current="3"/></window><tab_structure><column_width id="0" width="300"/><column_width id="1" width="0"/><column_width id="2" width="100"/><column_width id="3" width="2553"/><column_width id="4" width="0"/><expanded_item id="0" parent="1"/><expanded_item id="1" parent="1"/><expanded_item id="2" parent="1"/><expanded_item id="3" parent="1"/></tab_structure><tab_browse><table title="tipo_detalle" custom_title="0" dock_id="1" table="4,12:maintipo_detalle"/><dock_state state="000000ff00000000fd00000001000000020000038b00000260fc0100000001fb000000160064006f0063006b00420072006f007700730065003101000000000000038b0000011e00ffffff0000038b0000000000000004000000040000000800000008fc00000000"/><default_encoding codec=""/><browse_table_settings><table schema="main" name="alimentos" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="69"/><column index="2" value="151"/><column index="3" value="143"/><column index="4" value="52"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="ingredientePlatillo" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="69"/><column index="2" value="56"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="platillos" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="56"/><column index="2" value="247"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="tipo_detalle" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="82"/><column index="2" value="119"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="usuarios" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="52"/><column index="2" value="72"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="vista_platillos_ingredientes_resumen" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="56"/><column index="2" value="46"/><column index="3" value="135"/><column index="4" value="79"/><column index="5" value="86"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table></browse_table_settings></tab_browse><tab_sql><sql name="SQL 1">create table usuarios(
	nombre text PRIMARY KEY,
	contraseña text not null
);

select * from alimentos

-- Platillos y sus ingredientes
create table alimentos(
	idAlimento integer PRIMARY KEY AUTOINCREMENT,
	nombre text not null,
	tipo text not null,
	calorias int not null,
	imagen text not null
);

create table tiene_detalles(
	idAlimento integer not null,
	idTipoDetalle INTEGER not null,
	CONSTRAINT FK_idAlimento_tiene_detalles FOREIGN KEY (idAlimento) REFERENCES alimentos,
	CONSTRAINT  FK_idTipoDetalle_tiene_detalles FOREIGN KEY (idTipoDetalle) REFERENCES tipo_detalle
);

create table tipo_detalle(
	idTipoDetalle INTEGER PRIMARY KEY AUTOINCREMENT,
	tipoDetalle text not null
);

DROP VIEW IF EXISTS vista_alimentos_detalle_filas;
CREATE VIEW vista_alimentos_detalle_filas AS
SELECT
  a.idAlimento,
  a.nombre,
  a.tipo,
  a.calorias,
  a.imagen,
  td.tipoDetalle
FROM alimentos a
LEFT JOIN tiene_detalles h ON a.idAlimento = h.idAlimento
LEFT JOIN tipo_detalle td ON h.idTipoDetalle = td.idTipoDetalle;

SELECT * from vista_alimentos_detalle_filas

--------------------- INSERCIONES --------------------- 
--------------------- INSERCIONES --------------------- 
--------------------- INSERCIONES --------------------- 

INSERT INTO tipo_detalle(tipoDetalle)
SELECT 'blanca' WHERE NOT EXISTS (SELECT 1 FROM tipo_detalle WHERE tipoDetalle = 'blanca');

INSERT INTO tipo_detalle(tipoDetalle)
SELECT 'roja' WHERE NOT EXISTS (SELECT 1 FROM tipo_detalle WHERE tipoDetalle = 'roja');

INSERT INTO tipo_detalle(tipoDetalle)
SELECT 'vegetariana' WHERE NOT EXISTS (SELECT 1 FROM tipo_detalle WHERE tipoDetalle = 'vegetariana');

INSERT INTO tipo_detalle(tipoDetalle)
SELECT 'no_vegetariana' WHERE NOT EXISTS (SELECT 1 FROM tipo_detalle WHERE tipoDetalle = 'no_vegetariana');

-- 2) Insertar alimentos (carbohidratos)
INSERT INTO alimentos(nombre, tipo, calorias, imagen) VALUES 
('arroz con verduras', 'carbohidrato', 220, 'imagenes/Carbohidratos/arroz.png'),
('pasta integral con tomate', 'carbohidrato', 250, 'imagenes/Carbohidratos/pasta.png'),
('puré de papas con mantequilla', 'carbohidrato', 200, 'imagenes/Carbohidratos/pure.png'),
('quinoa con frutos secos', 'carbohidrato', 210, 'imagenes/Carbohidratos/quinoa.png'),
('cuscús marroquí', 'carbohidrato', 230, 'imagenes/Carbohidratos/cuscus.png'),
('pan integral tostado', 'carbohidrato', 180, 'imagenes/Carbohidratos/pan.png'),
('tortilla de maíz', 'carbohidrato', 150, 'imagenes/Carbohidratos/tortilla.png'),
('papas al ajillo', 'carbohidrato', 300, 'imagenes/Carbohidratos/papas.png');

-- 3) Insertar alimentos (proteínas / carne)
INSERT INTO alimentos(nombre, tipo, calorias, imagen) VALUES 
('pollo en salsa de champiñones', 'carne', 350, 'imagenes/Proteínas/pollo.png'),
('res al horno con hierbas', 'carne', 400, 'imagenes/Proteínas/res.png'),
('salmón a la plancha con limón', 'carne', 300, 'imagenes/Proteínas/salmon.png'),
('tofu al curry', 'carne', 250, 'imagenes/Proteínas/tofu.png'),
('pavo al ajillo', 'carne', 280, 'imagenes/Proteínas/pavo.png'),
('cerdo estofado', 'carne', 380, 'imagenes/Proteínas/cerdo.png'),
('tempeh a la parrilla', 'carne', 220, 'imagenes/Proteínas/tempeh.png'),
('gambas al ajillo', 'carne', 200, 'imagenes/Proteínas/gambas.png');

-- 4) Insertar alimentos (vegetales)
INSERT INTO alimentos(nombre, tipo, calorias, imagen) VALUES 
('ensalada César', 'vegetal', 150, 'imagenes/Vegetales/cesar.png'),
('brócoli al vapor', 'vegetal', 80, 'imagenes/Vegetales/brocoli.png'),
('vegetales salteados', 'vegetal', 120, 'imagenes/Vegetales/vegetalesSalteados.png'),
('col rizada con limón', 'vegetal', 70, 'imagenes/Vegetales/col.png'),
('espinacas a la crema', 'vegetal', 100, 'imagenes/Vegetales/espinacas.png'),
('berenjenas a la parmesana', 'vegetal', 130, 'imagenes/Vegetales/berenjenas.png'),
('calabacín al horno', 'vegetal', 90, 'imagenes/Vegetales/calabacin.png'),
('pimientos asados', 'vegetal', 60, 'imagenes/Vegetales/pimientos.png');

-- 5) Insertar alimentos (postres)
INSERT INTO alimentos(nombre, tipo, calorias, imagen) VALUES ('tarta de chocolate', 'postre', 450, 'imagenes/Postres/tarta.png');
('flan de vainilla', 'postre', 250, 'imagenes/Postres/flan.png');
('helado de fresa', 'postre', 200, 'imagenes/Postres/helado.png');
('mousse de chocolate negro', 'postre', 300, 'imagenes/Postres/mousse.png');
('fruta fresca con miel', 'postre', 150, 'imagenes/Postres/frutaMiel.png');
('pudín de pan', 'postre', 350, 'imagenes/Postres/pudín.png');
('brownie de nueces', 'postre', 400, 'imagenes/Postres/brownie.png');
('gelatina de frutas', 'postre', 100, 'imagenes/Postres/gelatina.png');

-- 6) Insertar alimentos (entradas)
INSERT INTO alimentos(nombre, tipo, calorias, imagen) VALUES 
('bruschetta de tomate y albahaca', 'entrada', 120, 'imagenes/Entradas/buschetta.png'),
('sopa de verduras', 'entrada', 100, 'imagenes/Entradas/sopaVerduras.png'),
('ensalada caprese', 'entrada', 150, 'imagenes/Entradas/caprese.png'),
('rollitos de jamón y queso', 'entrada', 180, 'imagenes/Entradas/rollitos.png'),
('gazpacho', 'entrada', 90, 'imagenes/Entradas/gazpacho.png'),
('tartar de salmón', 'entrada', 200, 'imagenes/Entradas/tartar.png'),
('humus con pan de pita', 'entrada', 130, 'imagenes/Entradas/humus.png'),
('croquetas de pollo', 'entrada', 160, 'imagenes/Entradas/croquetas.png');

-- 7) Relacionar alimentos con tipo_detalle (para los que tienen un dato extra)
-- Proteínas / carnes
INSERT INTO tiene_detalles(idAlimento, idTipoDetalle)
VALUES (
  (SELECT idAlimento FROM alimentos WHERE nombre = 'pollo en salsa de champiñones'),
  (SELECT idTipoDetalle FROM tipo_detalle WHERE tipoDetalle = 'blanca')
);

INSERT INTO tiene_detalles(idAlimento, idTipoDetalle)
VALUES (
  (SELECT idAlimento FROM alimentos WHERE nombre = 'res al horno con hierbas'),
  (SELECT idTipoDetalle FROM tipo_detalle WHERE tipoDetalle = 'roja')
);

INSERT INTO tiene_detalles(idAlimento, idTipoDetalle)
VALUES (
  (SELECT idAlimento FROM alimentos WHERE nombre = 'salmón a la plancha con limón'),
  (SELECT idTipoDetalle FROM tipo_detalle WHERE tipoDetalle = 'blanca')
);

INSERT INTO tiene_detalles(idAlimento, idTipoDetalle)
VALUES (
  (SELECT idAlimento FROM alimentos WHERE nombre = 'tofu al curry'),
  (SELECT idTipoDetalle FROM tipo_detalle WHERE tipoDetalle = 'vegetariana')
);

INSERT INTO tiene_detalles(idAlimento, idTipoDetalle)
VALUES (
  (SELECT idAlimento FROM alimentos WHERE nombre = 'pavo al ajillo'),
  (SELECT idTipoDetalle FROM tipo_detalle WHERE tipoDetalle = 'blanca')
);

INSERT INTO tiene_detalles(idAlimento, idTipoDetalle)
VALUES (
  (SELECT idAlimento FROM alimentos WHERE nombre = 'cerdo estofado'),
  (SELECT idTipoDetalle FROM tipo_detalle WHERE tipoDetalle = 'roja')
);

INSERT INTO tiene_detalles(idAlimento, idTipoDetalle)
VALUES (
  (SELECT idAlimento FROM alimentos WHERE nombre = 'tempeh a la parrilla'),
  (SELECT idTipoDetalle FROM tipo_detalle WHERE tipoDetalle = 'vegetariana')
);

INSERT INTO tiene_detalles(idAlimento, idTipoDetalle)
VALUES (
  (SELECT idAlimento FROM alimentos WHERE nombre = 'gambas al ajillo'),
  (SELECT idTipoDetalle FROM tipo_detalle WHERE tipoDetalle = 'blanca')
);

-- Entradas (con detalle vegetariana / no_vegetariana)
INSERT INTO tiene_detalles(idAlimento, idTipoDetalle)
VALUES (
  (SELECT idAlimento FROM alimentos WHERE nombre = 'bruschetta de tomate y albahaca'),
  (SELECT idTipoDetalle FROM tipo_detalle WHERE tipoDetalle = 'vegetariana')
);

INSERT INTO tiene_detalles(idAlimento, idTipoDetalle)
VALUES (
  (SELECT idAlimento FROM alimentos WHERE nombre = 'sopa de verduras'),
  (SELECT idTipoDetalle FROM tipo_detalle WHERE tipoDetalle = 'vegetariana')
);

INSERT INTO tiene_detalles(idAlimento, idTipoDetalle)
VALUES (
  (SELECT idAlimento FROM alimentos WHERE nombre = 'ensalada caprese'),
  (SELECT idTipoDetalle FROM tipo_detalle WHERE tipoDetalle = 'vegetariana')
);

INSERT INTO tiene_detalles(idAlimento, idTipoDetalle)
VALUES (
  (SELECT idAlimento FROM alimentos WHERE nombre = 'rollitos de jamón y queso'),
  (SELECT idTipoDetalle FROM tipo_detalle WHERE tipoDetalle = 'no_vegetariana')
);

INSERT INTO tiene_detalles(idAlimento, idTipoDetalle)
VALUES (
  (SELECT idAlimento FROM alimentos WHERE nombre = 'gazpacho'),
  (SELECT idTipoDetalle FROM tipo_detalle WHERE tipoDetalle = 'vegetariana')
);

INSERT INTO tiene_detalles(idAlimento, idTipoDetalle)
VALUES (
  (SELECT idAlimento FROM alimentos WHERE nombre = 'tartar de salmón'),
  (SELECT idTipoDetalle FROM tipo_detalle WHERE tipoDetalle = 'no_vegetariana')
);

INSERT INTO tiene_detalles(idAlimento, idTipoDetalle)
VALUES (
  (SELECT idAlimento FROM alimentos WHERE nombre = 'humus con pan de pita'),
  (SELECT idTipoDetalle FROM tipo_detalle WHERE tipoDetalle = 'vegetariana')
);

INSERT INTO tiene_detalles(idAlimento, idTipoDetalle)
VALUES (
  (SELECT idAlimento FROM alimentos WHERE nombre = 'croquetas de pollo'),
  (SELECT idTipoDetalle FROM tipo_detalle WHERE tipoDetalle = 'no_vegetariana')
);



select * from usuarios</sql><current_tab id="0"/></tab_sql></sqlb_project>
